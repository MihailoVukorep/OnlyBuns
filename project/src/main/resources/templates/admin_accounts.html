<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/main.css">

    <title>OnlyBuns - Admin - Accounts</title>
    <link rel="stylesheet" href="/css/admin_accounts.css">
    <link rel="stylesheet" href="/css/accounts.css">
    <link rel="stylesheet" href="/css/dataform-tiny.css">

    <link rel="stylesheet" href="/css/animations/rainbow_h1.css">
    <link rel="stylesheet" href="/css/animations/titleword.css">

    <script defer type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <h1>👥 Accounts 👥</h1>

    <div id="pagination-controls" th:if="${totalPages != 0}" style="padding: 15px 0 0 30px">
        <form action="/admin/accounts" method="get">
            <!-- Preserve current filters and sort options -->
            <input type="hidden" name="firstName" th:value="${firstName}">
            <input type="hidden" name="lastName" th:value="${lastName}">
            <input type="hidden" name="userName" th:value="${userName}">
            <input type="hidden" name="email" th:value="${email}">
            <input type="hidden" name="address" th:value="${address}">
            <input type="hidden" name="minPostCount" th:value="${minPostCount}">
            <input type="hidden" name="maxPostCount" th:value="${maxPostCount}">
            <input type="hidden" name="sort" th:value="${currentSort}">

            <style>
                #navpage {
                    display: inline-block;
                }
                
                #navpage_ul {
                    margin: 0;
                    padding: 0;
                }

                .page-item {
                    display: inline-block;
                    margin: 0;
                    padding: 0;
                }

                .page-item button {
                    background-color: transparent;
                    border: none;
                    padding: 0;
                    margin: 0;
                    cursor: pointer;
                }

                .page-item.active {
                    font-weight: bold;
                    color: var(--var-color-purple);
                    border-bottom: 1px solid var(--var-color-purple);
                }

                .page-item.disabled .page-link {
                    color: var(--var-color-pink-4-trans);
                    cursor: not-allowed; /* Prevent pointer */
                    text-decoration: none; /* Remove underline */
                    pointer-events: none; /* Disable interaction */
                }

                .page-link {
                    font-size: xx-large;
                    font-weight: bold;
                    color: var(--var-color-purple);
                    text-decoration: none
                }
            </style>

            <nav id="navpage" aria-label="Page navigation">
                <ul id="navpage_ul" class="pagination">
                    <!-- First Page -->
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <button type="submit" name="page" value="0" class="page-link" th:disabled="${currentPage == 0}">
                            &#171;
                        </button>
                    </li>

                    <!-- Previous Page -->
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <button type="submit" name="page" th:value="${currentPage - 1}" class="page-link" th:disabled="${currentPage == 0}">
                            &#60;
                        </button>
                    </li>

                    <!-- Page Numbers -->
                    <li th:each="pageNum : ${#numbers.sequence(0, totalPages - 1)}"
                        class="page-item"
                        th:classappend="${pageNum == currentPage} ? 'active'">
                        <button type="submit" name="page" th:value="${pageNum}" class="page-link">
                            <span th:text="${pageNum + 1}">1</span>
                        </button>
                    </li>

                    <!-- Next Page -->
                    <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                        <button type="submit" name="page" th:value="${currentPage + 1}" class="page-link"
                            th:disabled="${currentPage >= totalPages - 1}">
                            &#62;
                        </button>
                    </li>

                    <!-- Last Page -->
                    <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                        <button type="submit" name="page" th:value="${totalPages - 1}" class="page-link"
                            th:disabled="${currentPage >= totalPages - 1}">
                            &#187;
                        </button>
                    </li>
                </ul>
            </nav>
        </form>
    </div>

    <span id="search">
        <form class="dataform-tiny" action="/admin/accounts" method="get">
            <table>
                <tr>
                    <th><span class="title-word title-word-1">✍️ First Name:</span></th>
                    <td><input type="text" id="firstName" name="firstName" placeholder="Enter first name" th:value="${firstName}"></td>
                </tr>
                <tr>
                    <th><span class="title-word title-word-2">✍️ Last Name:</span></th>
                    <td><input type="text" id="lastName" name="lastName" placeholder="Enter last name" th:value="${lastName}"></td>
                </tr>
                <tr>
                    <th><span class="title-word title-word-3">👤 Username:</span></th>
                    <td><input type="text" id="userName" name="userName" placeholder="Enter username" th:value="${userName}"></td>
                </tr>
                <tr>
                    <th><span class="title-word title-word-4">📧 Email:</span></th>
                    <td><input type="email" id="email" name="email" placeholder="Enter email address" th:value="${email}"></td>
                </tr>
                <tr>
                    <th><span class="title-word title-word-5">📍 Address:</span></th>
                    <td><input type="text" id="address" name="address" placeholder="Enter address" th:value="${address}"></td>
                </tr>
                <tr>
                    <th><span class="title-word title-word-6">🔻 Minimum Post Count:</span></th>
                    <td><input type="number" id="minPostCount" name="minPostCount" placeholder="0" min="0" th:value="${minPostCount}"></td>
                </tr>
                <tr>
                    <th><span class="title-word title-word-7">🔺 Maximum Post Count:</span></th>
                    <td><input type="number" id="maxPostCount" name="maxPostCount" placeholder="1000" min="0" th:value="${maxPostCount}"></td>
                </tr>
            </table>

            <div class="dataform-tiny-buttons">
                <button type="submit">🔎 Search</button>
                <button type="reset">🔄 Reset Input</button>
                <a href="/admin/accounts">
                    <button type="button">❌ Clear All</button>
                </a>
            </div>
        </form>
    
        <div id="sort_controls">
            <form action="/admin/accounts" method="GET" id="sortForm">
                <select id="sortOptions" name="sort" th:value="${currentSort}" onchange="this.form.submit()">
                    <option value="id,asc" th:selected="${currentSort == 'id,asc'}">Id Ascending</option>
                    <option value="id,desc" th:selected="${currentSort == 'id,desc'}">Id Descending</option>
                    <option value="follow_count,asc" th:selected="${currentSort == 'follow_count,asc'}">Followers Ascending</option>
                    <option value="follow_count,desc" th:selected="${currentSort == 'follow_count,desc'}">Followers Descending</option>
                    <option value="email,asc" th:selected="${currentSort == 'email,asc'}">Email Ascending</option>
                    <option value="email,desc" th:selected="${currentSort == 'email,desc'}">Email Descending</option>
                </select>
            </form>
        </div>
    </span>
    

    <div th:replace="~{fragments/accounts :: accounts}"></div>
</body>

</html>
